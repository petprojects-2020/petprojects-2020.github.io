(this["webpackJsonpcodica-test-project"]=this["webpackJsonpcodica-test-project"]||[]).push([[0],{202:function(t,e,n){},203:function(t,e,n){},205:function(t,e,n){},206:function(t,e,n){},229:function(t,e,n){},365:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n(55),i=n.n(c),r=n(45),s=n(46),o=n(47),d=n(49),l=(n(202),n(203),n(2)),u=function(){return Object(l.jsx)("header",{className:"header__container row justify-content-center bg-secondary\r align-items-center border rounded",children:Object(l.jsx)("div",{className:"p-2 border rounded bg-white",children:Object(l.jsx)("strong",{children:"WEATHER APP"})})})},j=(n(205),function(){return Object(l.jsx)("footer",{className:"footer__container row justify-content-start\r align-items-center bg-secondary border rounded text-white",children:Object(l.jsx)("div",{className:"p-4",children:"Copyright \xa9 Weather APP 2021"})})}),b=n(24),p=(n(206),n(18)),h=n(30),m=function(){return{type:"UPDATE_DATA_FAILED"}},f=n(48),O=n.n(f),y=function(t){Object(o.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).handleUpdateBtn=function(e){O.a.get("https://api.openweathermap.org/data/2.5/find?q=".concat(e,"&lang=ru&units=metric&appid=b5e209e1901bfaaab9cdbef5ec123106")).then((function(e){var n=Object.values(e.data).pop()[0];t.props.onInitUpdate(n)})).catch((function(e){return t.props.updateDataFailed}))},t}return Object(s.a)(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.name,a=e.id,c=e.main,i=e.weather;return Object(l.jsxs)("div",{className:"p-3 col-12 col-sm-6 col-lg-3 border border-secondary rounded",children:[Object(l.jsx)("div",{children:Object(l.jsx)("strong",{children:n})}),Object(l.jsx)("div",{className:"my-1",children:i[0].description}),Object(l.jsxs)("div",{className:"my-2",children:["\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430(\xb0C) ",Object(l.jsxs)("strong",{children:[c.temp,"\xb0"]}),","]}),Object(l.jsxs)("div",{children:["\u0447\u0443\u0432\u0441\u0442\u0432\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u043a ",c.feels_like]}),Object(l.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(l.jsx)("button",{onClick:function(){return t.handleUpdateBtn(n)},className:"btn btn-success my-3",children:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(l.jsx)("button",{onClick:function(){t.props.history.push("/cities/".concat(a))},className:"btn btn-sm text-dark btn-outline-success",children:"\u043f\u043e\u0433\u043e\u0434\u0430 \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u0435\u0435"}),Object(l.jsx)("button",{onClick:function(){return t.props.deleteCity(n)},href:"#",className:"my-3 btn btn-sm btn-outline-danger",children:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})}}]),n}(a.Component),x=Object(p.f)(Object(h.b)((function(t){return{citiesItems:t.datadownloading.citiesList}}),(function(t){return{onInitUpdate:function(e){return t(function(t){return{type:"UPDATE_DATA",payload:t}}(e))},updateDataFailed:function(){return t(m)},deleteCity:function(e){return t(function(t){return{type:"DELETE_CITY",payload:t}}(e))}}}))(y)),v=Object(h.b)((function(t){return{citiesItems:t.datadownloading.citiesList,isReady:t.datadownloading.isReady}}))((function(t){var e=t.citiesItems,n=t.isReady,a=(new Date).toLocaleDateString();return Object(l.jsxs)("section",{className:"defaultcities__container text-center my-5",children:[Object(l.jsxs)("h2",{className:"my-4",children:["\u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u043f\u043e\u0433\u043e\u0434\u044b \u0432 \u0433\u043e\u0440\u043e\u0434\u0430\u0445 (",a,")"]}),Object(l.jsx)("div",{className:"row",children:n?e.map((function(t){return Object(l.jsx)(x,Object(b.a)({},t),t.id)})):"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"})]})})),g=(n(229),function(t){Object(o.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).state={cityName:"",isReady:null},t.handleEnteredData=function(e){var n=e.target.value;t.setState({cityName:n})},t.handleAddBtn=function(){O.a.get("https://api.openweathermap.org/data/2.5/find?q=".concat(t.state.cityName,"&lang=ru&units=metric&appid=b5e209e1901bfaaab9cdbef5ec123106")).then((function(e){var n=Object.values(e.data).pop();if(0===n.length)t.props.addCityFailed();else{var a=n[0];t.props.addCity(a)}})).catch((function(){return t.props.addCityFailed()})),t.setState({cityName:""})},t}return Object(s.a)(n,[{key:"render",value:function(){var t=this;return Object(l.jsx)("section",{className:"row justify-content-center",children:Object(l.jsxs)("div",{className:"my-5 py-2 px-4 col-12 col-md-9 col-lg-6 bg-light border border-secondary\r rounded addingcity__container text-center",children:[Object(l.jsx)("h2",{className:"my-3",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u043e\u0440\u043e\u0434"}),Object(l.jsxs)("div",{className:"d-flex flex-column flex-sm-row justify-content-center",children:[Object(l.jsx)("input",{onChange:function(e){return t.handleEnteredData(e)},className:"form-control w-75",type:"text",value:this.state.cityName,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430"}),Object(l.jsx)("button",{onClick:this.handleAddBtn,className:"btn btn-lg btn-danger ml-2",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]}),Object(l.jsx)("div",{className:"my-4",children:"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0439: Poltava, Milan, Sumy, Zhytomyr, Paris, London"})]})})}}]),n}(a.Component)),D=Object(h.b)((function(t){return{citiesItems:t.datadownloading.citiesList,isError:t.datadownloading.error}}),(function(t){return{addCity:function(e){return t({type:"ADD_CITY",payload:e})},addCityFailed:function(e){return t({type:"ADD_CITY_FAILED"})}}}))(g),w=function(){return{type:"SET_DATA_FAILED"}},A=n(74),N=n(367),I=n(368),L=n(193),C=n(372),_=n(190),E=n(33),T=n(191),k=n(86),F=function(t){Object(o.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).state={arr:[]},t.displayData=function(e){var n=[];e.map((function(t){var e=new Date(1e3*t.dt).getHours(),a=t.temp;n.push({time:e,temperature:a})}));for(var a=n.findIndex((function(t){return 0===t.time})),c=[],i=0;i<=a;i++)c.push(n[i]);t.setState({arr:c})},t}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.id,n=this.props.citiesItems.find((function(t){return t.id==e})).coord,a=n.lat,c=n.lon;O.a.get("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(a,"&lon=").concat(c,"&lang=ru&exclude=minutely,daily,alerts&units=metric&appid=b5e209e1901bfaaab9cdbef5ec123106")).then((function(e){var n=Object.values(e.data).pop();t.displayData(n)})).catch((function(t){return console.log(t)}))}},{key:"render",value:function(){var t=this.props.id,e=this.props.citiesItems.find((function(e){return e.id==t})),n=Object(l.jsx)(N.a,{width:"100%",height:600,children:Object(l.jsxs)(I.a,{data:this.state.arr,margin:{top:30,right:30,left:30,bottom:30},children:[Object(l.jsx)(L.a,{type:"monotone",dataKey:"temperature",stroke:"#8884d8"}),Object(l.jsx)(C.a,{stroke:"#ccc",strokeDasharray:"5 5"}),Object(l.jsx)(_.a,{dataKey:"time",children:Object(l.jsx)(E.a,{value:"Time",position:"bottom",style:{textAnchor:"middle"}})}),Object(l.jsx)(T.a,{children:Object(l.jsx)(E.a,{value:"Temperature (\xb0C)",position:"left",angle:-90,style:{textAnchor:"middle"}})}),Object(l.jsx)(k.a,{})]})}),a=(new Date).toLocaleDateString();return Object(l.jsxs)("div",{className:"text-center",children:[Object(l.jsxs)("div",{className:"row my-4 align-items-center",children:[Object(l.jsx)(A.b,{to:"/",children:Object(l.jsx)("button",{className:"btn btn-secondary",children:"\u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})}),Object(l.jsxs)("span",{className:"ml-2",children:["/ ",e.name]})]}),Object(l.jsxs)("h1",{className:"my-4",children:["\u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u043f\u043e\u0433\u043e\u0434\u044b ",e.name," (",a,") - ",e.weather[0].description]}),Object(l.jsxs)("div",{className:"row my-4 justify-content-center",children:[Object(l.jsxs)("div",{className:"col-12 col-sm-6 col-md-4 border p-3 text-left rounded",children:[Object(l.jsxs)("div",{children:["\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430(\xb0C) ",Object(l.jsxs)("strong",{children:[e.main.temp,"\xb0"]}),","]}),Object(l.jsxs)("div",{children:["\u0447\u0443\u0432\u0441\u0442\u0432\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u043a ",e.main.feels_like]})]}),Object(l.jsxs)("div",{className:"col-12 col-sm-6 col-md-4 border p-3 text-left rounded",children:[Object(l.jsxs)("div",{children:["\u0412\u0435\u0442\u0435\u0440, \u043c/c\u0435\u043a - ",e.wind.speed]}),Object(l.jsxs)("div",{children:["\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c, % - ",e.main.humidity]})]})]}),Object(l.jsxs)("div",{className:"row justify-content-center border rounded p-2",children:[Object(l.jsx)("h2",{className:"my-2",children:"\u041f\u043e\u0447\u0430\u0441\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0433\u043d\u043e\u0437 \u043f\u043e\u0433\u043e\u0434\u044b"}),n]})]})}}]),n}(a.Component),S=Object(h.b)((function(t){return{citiesItems:t.datadownloading.citiesList}}))(F),P=function(t){Object(o.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).state={defaultCitiesList:["Kharkiv","Kyiv","Dnipro","Lviv"]},t.uploadingData=function(e){e.forEach((function(e){O.a.get("https://api.openweathermap.org/data/2.5/find?q=".concat(e,"&lang=ru&units=metric&appid=b5e209e1901bfaaab9cdbef5ec123106")).then((function(e){var n=Object.values(e.data).pop()[0];t.props.onInit(n)})).catch((function(){return t.props.setDataFailed}))}))},t}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=localStorage.getItem("citiesList");if(t){var e=t.split(",");this.uploadingData(e)}else this.uploadingData(this.state.defaultCitiesList)}},{key:"componentDidUpdate",value:function(t,e){if(t.citiesItems!==this.props.citiesItems){var n=this.props.citiesItems.map((function(t){return t.name}));localStorage.setItem("citiesList",n)}}},{key:"render",value:function(){return Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)(A.a,{children:[Object(l.jsx)(u,{}),Object(l.jsxs)(p.c,{children:[Object(l.jsx)(p.a,{path:"/",exact:!0,render:function(){return Object(l.jsxs)("main",{children:[Object(l.jsx)(v,{}),Object(l.jsx)(D,{})]})}}),Object(l.jsx)(p.a,{path:"/cities/:id",render:function(t){var e=t.match.params.id;return Object(l.jsx)(S,{id:e})}})]}),Object(l.jsx)(j,{})]})})}}]),n}(a.Component),U=Object(h.b)((function(t){return{citiesItems:t.datadownloading.citiesList}}),(function(t){return{onInit:function(e){return t(function(t){return{type:"SET_DATA",payload:t}}(e))},setDataFailed:function(){return t(w)}}}))(P),R=n(61),Y=n(85),B={citiesList:[],error:!1,isReady:!1},K=Object(R.b)({datadownloading:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_DATA":var n=e.payload.id,a=t.citiesList.findIndex((function(t){return t.id===n}));return-1===a?Object(b.a)(Object(b.a)({},t),{},{citiesList:[].concat(Object(Y.a)(t.citiesList),[e.payload]),error:!1,isReady:!0}):t;case"ADD_CITY":return Object(b.a)(Object(b.a)({},t),{},{citiesList:[].concat(Object(Y.a)(t.citiesList),[e.payload]),error:!1});case"DELETE_CITY":return Object(b.a)(Object(b.a)({},t),{},{citiesList:t.citiesList.filter((function(t){return t.name!==e.payload})),error:!1});case"UPDATE_DATA":var c=e.payload.id,i=t.citiesList.findIndex((function(t){return t.id===c}));return Object(b.a)(Object(b.a)({},t),{},{citiesList:[].concat(Object(Y.a)(t.citiesList.slice(0,i)),[e.payload],Object(Y.a)(t.citiesList.slice(i+1))),error:!1});case"SET_DATA_FAILED":case"ADD_CITY_FAILED":return Object(b.a)(Object(b.a)({},t),{},{error:!0});default:return t}}}),q=Object(R.c)(K);i.a.render(Object(l.jsx)(h.a,{store:q,children:Object(l.jsx)(U,{})}),document.getElementById("root"))}},[[365,1,2]]]);
//# sourceMappingURL=main.f996bca3.chunk.js.map